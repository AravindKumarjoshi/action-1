name: StoryBook Deployment
 
on: 
  pull_request: 
     types: [labeled] 
     branches:
        - main 
     paths-ignore:
        - '.github/**'
 
#env:
 
jobs:
    build:
        runs-on: ubuntu-latest
        if: contains(github.event.pull_request.labels.*.name, 'storybook')
        steps:
            # - uses: actions/checkout@v3
            # - name: Use Node.js 18
            #   uses: actions/setup-node@v3
            #   with:
            #     node-version: 18.8
            # - name: Dependency installation
            #   run: |
            #     npm install
            #     npm install -g @azure/static-web-apps-cli
           
            - name: Build the artifact
              run: echo "Building........."
           
            - name: Deploy to Preview Environment
              run: |
                # swa deploy ./storybook-static --deployment-token ${{ secrets.AZURE_STATIC_WEB_APP_TOKEN }}
                echo "Deploying ........."
                echo "${{ github.event.pull_request.labels.*.name }}" 
 
            # - name: Upload Artifact
            #   uses: actions/upload-artifact@v4
            #   with:
            #     name: storybook-artifact
            #     path: storybook-static
       
    # deploy:
 
    #   runs-on: ubuntu-latest
    #   if: (github.event.pull_request.merged == true) && (github.event.pull_request.base == 'refs/base/main')
    #   steps:
    #     - uses: actions/checkout@v3
    #     - name: Use Node.js 18
    #       uses: actions/setup-node@v3
    #       with:
    #         node-version: 18.8
    #     - name: Dependency installation
    #       run: |
    #         npm install
    #         npm install -g @azure/static-web-apps-cli
       
    #     - name: Build the artifact
    #       run: npm run build-storybook
       
    #     - name: Deploy to Production Environment
    #       run: |
    #         swa deploy ./storybook-static --deployment-token ${{ secrets.AZURE_STATIC_WEB_APP_TOKEN }} --env production
